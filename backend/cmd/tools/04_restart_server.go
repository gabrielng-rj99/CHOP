package main

import (
	"bufio"
	"fmt"
	"os"
)

// restartServer stops and restarts server and frontend services without affecting the database
func restartServer() {
	clearTerminal()
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("โ              ๐ REINICIAR SERVIDOR E FRONTEND ๐                          โ")
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("\nEste processo irรก:")
	fmt.Println("  1. Parar o frontend Web")
	fmt.Println("  2. Parar o servidor HTTP API")
	fmt.Println("  3. Reiniciar o servidor HTTP API (porta 3000)")
	fmt.Println("  4. Reiniciar o frontend Web (porta 8080)")
	fmt.Println("\nโ O banco de dados NรO serรก afetado")
	fmt.Println("โ Todos os dados serรฃo preservados")
	fmt.Print("\nPressione ENTER para continuar ou CTRL+C para cancelar...")
	bufio.NewReader(os.Stdin).ReadString('\n')

	// Step 1: Stop frontend
	fmt.Println("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("โ [1/4] Parando frontend Web                                                 โ")
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n ")
	simulateEnterForNextFunction(stopFrontend)

	// Step 2: Stop server
	fmt.Println("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("โ [2/4] Parando servidor HTTP API                                            โ")
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n ")
	simulateEnterForNextFunction(stopServer)

	// Step 3: Start server
	fmt.Println("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("โ [3/4] Reiniciando servidor HTTP API                                        โ")
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n ")
	simulateEnterForNextFunction(startServer)

	// Step 4: Start frontend
	fmt.Println("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ")
	fmt.Println("โ [4/4] Reiniciando frontend Web                                             โ")
	fmt.Println("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n ")
	simulateEnterForNextFunction(startFrontend)

	fmt.Print("\nPressione ENTER para continuar...")
	bufio.NewReader(os.Stdin).ReadString('\n')
}
